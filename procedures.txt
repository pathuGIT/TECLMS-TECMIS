-------------------------------------------------------------------------------------------------
PROCEDURES
-------------------------------------------------------------------------------------------------

DELIMITER //
CREATE PROCEDURE view_attendance_for_subject()
BEGIN
SELECT
  Crs_id,
  CONCAT(Round((Total_Attendance * 6.66),2) ,'%') AS "Attendance",
  Eligibility
FROM ELIGIBILITY;
END//
DELIMITER ;


DELIMITER //
CREATE PROCEDURE view_attendance_for_individualStd(IN id CHAR(6))
BEGIN
SELECT
  Crs_id,
  CONCAT(Round((Total_Attendance * 6.66),2) ,'%') AS "Attendance",
  Eligibility
FROM ELIGIBILITY
WHERE Std_id = id;
END//
DELIMITER ;


DELIMITER //
CREATE PROCEDURE view_attendance_for_StudentCource(IN sid CHAR(6), IN cid CHAR(7))
BEGIN
  SELECT
    Crs_id,
    CONCAT(ROUND((Total_Attendance * 6.66), 2), '%') AS "Attendance",
    Eligibility
  FROM ELIGIBILITY
  WHERE Std_id = sid AND Crs_id = cid;
END//
DELIMITER ;


DELIMITER //
CREATE PROCEDURE view_attendance_for_theory()
BEGIN
SELECT 
    e.Std_id,
    e.Crs_id,
    CONCAT(Round((e.Total_Attendance * 6.66),2) ,'%') AS "Attendance",
    e.Eligibility 
    FROM ELIGIBILITY as e 
    INNER JOIN course as c on e.Crs_id = c.Crs_id 
    WHERE c.Type = 'Theory' 
    ORDER BY Std_id;
END//
DELIMITER ;


DELIMITER //
CREATE PROCEDURE view_attendance_for_practical()
BEGIN
SELECT 
    e.Std_id,
    e.Crs_id,
    CONCAT(Round((e.Total_Attendance * 6.66),2) ,'%') AS "Attendance",
    e.Eligibility 
    FROM ELIGIBILITY as e 
    INNER JOIN course as c on e.Crs_id = c.Crs_id 
    WHERE c.Type = 'practical' 
    ORDER BY Std_id;
END//
DELIMITER ;


DELIMITER //
CREATE PROCEDURE view_all_CA_mark_for_cource(IN cid CHAR(7))
BEGIN
select Std_id,CA_Mark from foundation_of_mark where Crs_id = cid;
END//
DELIMITER ;

DELIMITER //
CREATE PROCEDURE view_CA_mark_for_CourceStudent(IN cid CHAR(7), IN sid CHAR(6))
BEGIN
select Std_id,CA_Mark from foundation_of_mark where Crs_id = cid AND Std_id = sid;
END//
DELIMITER ;


DELIMITER //
CREATE PROCEDURE view_CA_mark_for_Student(IN sid CHAR(6))
BEGIN
select Crs_id,CA_Mark from foundation_of_mark where Std_id = sid;
END//
DELIMITER ;


DELIMITER //
CREATE PROCEDURE view_Final_mark_for_All()
BEGIN
select Std_id,Crs_id,Total_Mark from foundation_of_mark;
END//
DELIMITER ;


DELIMITER //
CREATE PROCEDURE view_All_Final_mark_for_student(IN sid CHAR(6))
BEGIN
select Std_id,Crs_id,Total_Mark from foundation_of_mark where Std_id = sid;
END//
DELIMITER ;


DELIMITER //
CREATE PROCEDURE view_All_Eligibile_student()
BEGIN
SELECT Std_id,Crs_id,Eligibility FROM eligibility;
END//
DELIMITER ;

DELIMITER //
CREATE PROCEDURE view_Grades_for_All()
BEGIN
select Std_id,Crs_id,Grade from mark ;
END//
DELIMITER ;


DELIMITER //
CREATE PROCEDURE view_Grades_for_student(IN sid CHAR(6))
BEGIN
select Std_id,Crs_id,Grade from mark where Std_id = sid;
END//
DELIMITER ;


DELIMITER //
CREATE PROCEDURE view_SGPA_CGPA_For_All()
BEGIN
SELECT 
    s.Std_id,
    s.SGPA, 
    c.CGPA 
FROM 
    student_sgpa AS s 
INNER JOIN student_cgpa AS c ON s.Std_id = c.Std_id;
END//
DELIMITER ;


DELIMITER //
CREATE PROCEDURE view_SGPA_CGPA_For_Student(IN sid CHAR(6))
BEGIN
SELECT 
    s.Std_id,
    s.SGPA, 
    c.CGPA 
FROM 
    student_sgpa AS s 
INNER JOIN student_cgpa AS c ON s.Std_id = c.Std_id
WHERE s.Std_id = sid;
END//
DELIMITER ;

